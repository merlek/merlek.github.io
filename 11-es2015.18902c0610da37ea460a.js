(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ElCL:function(l,n,t){"use strict";t.r(n);var e=t("8Y7J");class s{}var u=t("pMnS"),i=t("s7LF");const a=(l,n)=>Math.floor(Math.random()*n)+l,o=l=>n=>(n%l+l)%l;class r{constructor(l,n){this.x=l,this.y=n}equals(l){return null!=l&&this.x===l.x&&this.y===l.y}}let h=(()=>{class l{constructor(){}}return l.NORTH=new r(0,-1),l.SOUTH=new r(0,1),l.EAST=new r(1,0),l.WEST=new r(-1,0),l})();class c{constructor(l=70,n=50,t=[h.EAST],e=[],s=new r(16,2)){this.cols=l,this.rows=n,this.moves=t,this.snake=e,this.apple=s}willEat(){return this.nextHead().equals(this.apple)}willCrash(){return null!=this.snake.find(l=>l&&this.nextHead().equals(l))}validMove(l){return this.moves[0].x+l.x!==0||this.moves[0].y+l.y!==0}nextMoves(){return this.moves.length>1?this.moves.slice(1):this.moves}nextApple(){return this.willEat()?this.rndPos():this.apple}nextHead(){return 0===this.snake.length?new r(2,2):new r(o(this.cols)(this.snake[0].x+this.moves[0].x),o(this.rows)(this.snake[0].y+this.moves[0].y))}nextSnake(){return this.willCrash()?[]:this.willEat()?[this.nextHead()].concat(this.snake):[this.nextHead()].concat(this.snake.slice(0,this.snake.length-1))}rndPos(){return new r(a(0,this.cols-1),a(0,this.rows-1))}merge(l){return Object.assign(new c,this,l)}next(){return new c(this.cols,this.rows,this.nextMoves(),this.nextSnake(),this.nextApple())}enqueue(l){return this.validMove(l)?this.merge({moves:this.moves.concat([l])}):this}}class d{constructor(l,n,t=new c){this.state=t,this.fps=15,this.update=l=>n=>{n-l>1e3/this.fps?(this.state=this.state.next(),this.draw(),this.animationFrameId=window.requestAnimationFrame(this.update(n))):this.animationFrameId=window.requestAnimationFrame(this.update(l))},this.backgroundCtx=n.getContext("2d"),this.canvasWidth=n.width,this.canvasHeight=n.height,this.gameCtx=l.getContext("2d")}start(){this.draw(),this.animationFrameId=window.requestAnimationFrame(this.update(0))}draw(){this.gameCtx.fillStyle="#232323",this.gameCtx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.gameCtx.fillStyle="rgb(0,200,50)",this.state.snake.forEach(l=>this.gameCtx.fillRect(this.x(l.x),this.y(l.y),this.x(1),this.y(1))),this.gameCtx.fillStyle="rgb(255,50,0)",this.gameCtx.fillRect(this.x(this.state.apple.x),this.y(this.state.apple.y),this.x(1),this.y(1)),0===this.state.snake.length&&(this.gameCtx.fillStyle="rgb(255,0,0)",this.gameCtx.fillRect(0,0,this.canvasWidth,this.canvasHeight))}destroy(){this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId)}keyEvent(l){switch(console.log("keyEvent",l),l){case"w":case"h":case"ArrowUp":this.state=this.state.enqueue(h.NORTH);break;case"a":case"j":case"ArrowLeft":this.state=this.state.enqueue(h.WEST);break;case"s":case"k":case"ArrowDown":this.state=this.state.enqueue(h.SOUTH);break;case"d":case"l":case"ArrowRight":this.state=this.state.enqueue(h.EAST)}}x(l){return Math.round(l*this.canvasWidth/this.state.cols)}y(l){return Math.round(l*this.canvasHeight/this.state.rows)}}class g{constructor(){this._highScore=0}ngOnInit(){const l=document.getElementById("game-layer"),n=document.getElementById("background-layer");this.animator=new d(l,n),window.addEventListener("keydown",l=>this.animator.keyEvent(l.key)),this.animator.start()}ngOnDestroy(){this.animator.destroy()}get score(){return this.animator.state.snake.length}set score(l){}get highScore(){return this.score>this._highScore&&(this._highScore=this.score),this._highScore}set highScore(l){}}var b=e.vb({encapsulation:0,styles:[["#stage[_ngcontent-%COMP%]{width:700px;height:500px;position:relative;box-sizing:content-box;border:1px solid;background-color:#fff}#stage[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}#stage[_ngcontent-%COMP%]   #ui-layer[_ngcontent-%COMP%]{z-index:3}#stage[_ngcontent-%COMP%]   #game-layer[_ngcontent-%COMP%]{z-index:2}#stage[_ngcontent-%COMP%]   #background-layer[_ngcontent-%COMP%]{z-index:1}"]],data:{}});function p(l){return e.Tb(0,[(l()(),e.xb(0,0,null,null,2,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(l()(),e.xb(1,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),e.Rb(-1,null,["Snake"])),(l()(),e.xb(3,0,null,null,5,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(l()(),e.xb(4,0,null,null,4,"div",[["class","col"]],null,null,null,null,null)),(l()(),e.xb(5,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),e.xb(6,0,null,null,1,"a",[["href","https://en.wikipedia.org/wiki/Snake_(video_game_genre)"],["target","_blank"]],null,null,null,null,null)),(l()(),e.Rb(-1,null,["Snake"])),(l()(),e.Rb(-1,null,[" is the common name for a video game concept where the player maneuvers a line which grows in length, with the line itself being a primary obstacle. "])),(l()(),e.xb(9,0,null,null,34,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(l()(),e.xb(10,0,null,null,33,"div",[["class","jumbotron"]],null,null,null,null,null)),(l()(),e.xb(11,0,null,null,2,"div",[["id","stage"]],null,null,null,null,null)),(l()(),e.xb(12,0,null,null,0,"canvas",[["height","500"],["id","game-layer"],["width","700"]],null,null,null,null,null)),(l()(),e.xb(13,0,null,null,0,"canvas",[["height","500"],["id","background-layer"],["width","700"]],null,null,null,null,null)),(l()(),e.xb(14,0,null,null,29,"form",[["class","form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,t){var s=!0;return"submit"===n&&(s=!1!==e.Jb(l,16).onSubmit(t)&&s),"reset"===n&&(s=!1!==e.Jb(l,16).onReset()&&s),s}),null,null)),e.wb(15,16384,null,0,i.q,[],null,null),e.wb(16,4210688,null,0,i.j,[[8,null],[8,null]],null,null),e.Ob(2048,null,i.b,null,[i.j]),e.wb(18,16384,null,0,i.i,[[4,i.b]],null,null),(l()(),e.xb(19,0,null,null,24,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(l()(),e.xb(20,0,null,null,11,"div",[["class","col-4"]],null,null,null,null,null)),(l()(),e.xb(21,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),e.xb(22,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),e.xb(23,0,null,null,1,"span",[["class","input-group-text"],["id","scoreLabel"]],null,null,null,null,null)),(l()(),e.Rb(-1,null,["Score"])),(l()(),e.xb(25,0,null,null,6,"input",[["aria-describedby","scoreLabel"],["class","form-control"],["disabled",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,t){var s=!0,u=l.component;return"input"===n&&(s=!1!==e.Jb(l,26)._handleInput(t.target.value)&&s),"blur"===n&&(s=!1!==e.Jb(l,26).onTouched()&&s),"compositionstart"===n&&(s=!1!==e.Jb(l,26)._compositionStart()&&s),"compositionend"===n&&(s=!1!==e.Jb(l,26)._compositionEnd(t.target.value)&&s),"ngModelChange"===n&&(s=!1!==(u.score=t)&&s),s}),null,null)),e.wb(26,16384,null,0,i.c,[e.J,e.n,[2,i.a]],null,null),e.Ob(1024,null,i.f,(function(l){return[l]}),[i.c]),e.wb(28,671744,null,0,i.k,[[2,i.b],[8,null],[8,null],[6,i.f]],{isDisabled:[0,"isDisabled"],model:[1,"model"],options:[2,"options"]},{update:"ngModelChange"}),e.Mb(29,{standalone:0}),e.Ob(2048,null,i.g,null,[i.k]),e.wb(31,16384,null,0,i.h,[[4,i.g]],null,null),(l()(),e.xb(32,0,null,null,11,"div",[["class","col-4"]],null,null,null,null,null)),(l()(),e.xb(33,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),e.xb(34,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),e.xb(35,0,null,null,1,"span",[["class","input-group-text"],["id","highScoreLabel"]],null,null,null,null,null)),(l()(),e.Rb(-1,null,["High Score"])),(l()(),e.xb(37,0,null,null,6,"input",[["aria-describedby","highScoreLabel"],["class","form-control"],["disabled",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,t){var s=!0,u=l.component;return"input"===n&&(s=!1!==e.Jb(l,38)._handleInput(t.target.value)&&s),"blur"===n&&(s=!1!==e.Jb(l,38).onTouched()&&s),"compositionstart"===n&&(s=!1!==e.Jb(l,38)._compositionStart()&&s),"compositionend"===n&&(s=!1!==e.Jb(l,38)._compositionEnd(t.target.value)&&s),"ngModelChange"===n&&(s=!1!==(u.highScore=t)&&s),s}),null,null)),e.wb(38,16384,null,0,i.c,[e.J,e.n,[2,i.a]],null,null),e.Ob(1024,null,i.f,(function(l){return[l]}),[i.c]),e.wb(40,671744,null,0,i.k,[[2,i.b],[8,null],[8,null],[6,i.f]],{isDisabled:[0,"isDisabled"],model:[1,"model"],options:[2,"options"]},{update:"ngModelChange"}),e.Mb(41,{standalone:0}),e.Ob(2048,null,i.g,null,[i.k]),e.wb(43,16384,null,0,i.h,[[4,i.g]],null,null)],(function(l,n){var t=n.component,e=t.score,s=l(n,29,0,!0);l(n,28,0,"",e,s);var u=t.highScore,i=l(n,41,0,!0);l(n,40,0,"",u,i)}),(function(l,n){l(n,14,0,e.Jb(n,18).ngClassUntouched,e.Jb(n,18).ngClassTouched,e.Jb(n,18).ngClassPristine,e.Jb(n,18).ngClassDirty,e.Jb(n,18).ngClassValid,e.Jb(n,18).ngClassInvalid,e.Jb(n,18).ngClassPending),l(n,25,0,e.Jb(n,31).ngClassUntouched,e.Jb(n,31).ngClassTouched,e.Jb(n,31).ngClassPristine,e.Jb(n,31).ngClassDirty,e.Jb(n,31).ngClassValid,e.Jb(n,31).ngClassInvalid,e.Jb(n,31).ngClassPending),l(n,37,0,e.Jb(n,43).ngClassUntouched,e.Jb(n,43).ngClassTouched,e.Jb(n,43).ngClassPristine,e.Jb(n,43).ngClassDirty,e.Jb(n,43).ngClassValid,e.Jb(n,43).ngClassInvalid,e.Jb(n,43).ngClassPending)}))}function m(l){return e.Tb(0,[(l()(),e.xb(0,0,null,null,1,"app-snake",[],null,null,null,p,b)),e.wb(1,245760,null,0,g,[],null,null)],(function(l,n){l(n,1,0)}),null)}var x=e.tb("app-snake",g,m,{},{},[]),v=t("SVse"),w=t("iInd");class y{}t.d(n,"SnakeModuleNgFactory",(function(){return C}));var C=e.ub(s,[],(function(l){return e.Gb([e.Hb(512,e.l,e.fb,[[8,[u.a,x]],[3,e.l],e.B]),e.Hb(4608,v.o,v.n,[e.x,[2,v.D]]),e.Hb(4608,i.o,i.o,[]),e.Hb(1073742336,v.b,v.b,[]),e.Hb(1073742336,w.o,w.o,[[2,w.t],[2,w.k]]),e.Hb(1073742336,y,y,[]),e.Hb(1073742336,i.n,i.n,[]),e.Hb(1073742336,i.d,i.d,[]),e.Hb(1073742336,s,s,[]),e.Hb(1024,w.i,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);