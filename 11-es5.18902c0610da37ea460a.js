function _defineProperties(n,l){for(var t=0;t<l.length;t++){var e=l[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function _createClass(n,l,t){return l&&_defineProperties(n.prototype,l),t&&_defineProperties(n,t),n}function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ElCL:function(n,l,t){"use strict";t.r(l);var e=t("8Y7J"),u=function n(){_classCallCheck(this,n)},i=t("pMnS"),s=t("s7LF"),a=function(n,l){return Math.floor(Math.random()*l)+n},o=function(n){return function(l){return(l%n+n)%n}},r=function(){function n(l,t){_classCallCheck(this,n),this.x=l,this.y=t}return _createClass(n,[{key:"equals",value:function(n){return null!=n&&this.x===n.x&&this.y===n.y}}]),n}(),c=function(){var n=function n(){_classCallCheck(this,n)};return n.NORTH=new r(0,-1),n.SOUTH=new r(0,1),n.EAST=new r(1,0),n.WEST=new r(-1,0),n}(),h=function(){function n(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:70,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[c.EAST],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new r(16,2);_classCallCheck(this,n),this.cols=l,this.rows=t,this.moves=e,this.snake=u,this.apple=i}return _createClass(n,[{key:"willEat",value:function(){return this.nextHead().equals(this.apple)}},{key:"willCrash",value:function(){var n=this;return null!=this.snake.find((function(l){return l&&n.nextHead().equals(l)}))}},{key:"validMove",value:function(n){return this.moves[0].x+n.x!==0||this.moves[0].y+n.y!==0}},{key:"nextMoves",value:function(){return this.moves.length>1?this.moves.slice(1):this.moves}},{key:"nextApple",value:function(){return this.willEat()?this.rndPos():this.apple}},{key:"nextHead",value:function(){return 0===this.snake.length?new r(2,2):new r(o(this.cols)(this.snake[0].x+this.moves[0].x),o(this.rows)(this.snake[0].y+this.moves[0].y))}},{key:"nextSnake",value:function(){return this.willCrash()?[]:this.willEat()?[this.nextHead()].concat(this.snake):[this.nextHead()].concat(this.snake.slice(0,this.snake.length-1))}},{key:"rndPos",value:function(){return new r(a(0,this.cols-1),a(0,this.rows-1))}},{key:"merge",value:function(l){return Object.assign(new n,this,l)}},{key:"next",value:function(){return new n(this.cols,this.rows,this.nextMoves(),this.nextSnake(),this.nextApple())}},{key:"enqueue",value:function(n){return this.validMove(n)?this.merge({moves:this.moves.concat([n])}):this}}]),n}(),d=function(){function n(l,t){var e=this,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new h;_classCallCheck(this,n),this.state=u,this.fps=15,this.update=function(n){return function(l){l-n>1e3/e.fps?(e.state=e.state.next(),e.draw(),e.animationFrameId=window.requestAnimationFrame(e.update(l))):e.animationFrameId=window.requestAnimationFrame(e.update(n))}},this.backgroundCtx=t.getContext("2d"),this.canvasWidth=t.width,this.canvasHeight=t.height,this.gameCtx=l.getContext("2d")}return _createClass(n,[{key:"start",value:function(){this.draw(),this.animationFrameId=window.requestAnimationFrame(this.update(0))}},{key:"draw",value:function(){var n=this;this.gameCtx.fillStyle="#232323",this.gameCtx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.gameCtx.fillStyle="rgb(0,200,50)",this.state.snake.forEach((function(l){return n.gameCtx.fillRect(n.x(l.x),n.y(l.y),n.x(1),n.y(1))})),this.gameCtx.fillStyle="rgb(255,50,0)",this.gameCtx.fillRect(this.x(this.state.apple.x),this.y(this.state.apple.y),this.x(1),this.y(1)),0===this.state.snake.length&&(this.gameCtx.fillStyle="rgb(255,0,0)",this.gameCtx.fillRect(0,0,this.canvasWidth,this.canvasHeight))}},{key:"destroy",value:function(){this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId)}},{key:"keyEvent",value:function(n){switch(console.log("keyEvent",n),n){case"w":case"h":case"ArrowUp":this.state=this.state.enqueue(c.NORTH);break;case"a":case"j":case"ArrowLeft":this.state=this.state.enqueue(c.WEST);break;case"s":case"k":case"ArrowDown":this.state=this.state.enqueue(c.SOUTH);break;case"d":case"l":case"ArrowRight":this.state=this.state.enqueue(c.EAST)}}},{key:"x",value:function(n){return Math.round(n*this.canvasWidth/this.state.cols)}},{key:"y",value:function(n){return Math.round(n*this.canvasHeight/this.state.rows)}}]),n}(),g=function(){function n(){_classCallCheck(this,n),this._highScore=0}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this,l=document.getElementById("game-layer"),t=document.getElementById("background-layer");this.animator=new d(l,t),window.addEventListener("keydown",(function(l){return n.animator.keyEvent(l.key)})),this.animator.start()}},{key:"ngOnDestroy",value:function(){this.animator.destroy()}},{key:"score",get:function(){return this.animator.state.snake.length},set:function(n){}},{key:"highScore",get:function(){return this.score>this._highScore&&(this._highScore=this.score),this._highScore},set:function(n){}}]),n}(),b=e.vb({encapsulation:0,styles:[["#stage[_ngcontent-%COMP%]{width:700px;height:500px;position:relative;box-sizing:content-box;border:1px solid;background-color:#fff}#stage[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}#stage[_ngcontent-%COMP%]   #ui-layer[_ngcontent-%COMP%]{z-index:3}#stage[_ngcontent-%COMP%]   #game-layer[_ngcontent-%COMP%]{z-index:2}#stage[_ngcontent-%COMP%]   #background-layer[_ngcontent-%COMP%]{z-index:1}"]],data:{}});function p(n){return e.Tb(0,[(n()(),e.xb(0,0,null,null,2,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(n()(),e.xb(1,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),e.Rb(-1,null,["Snake"])),(n()(),e.xb(3,0,null,null,5,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(n()(),e.xb(4,0,null,null,4,"div",[["class","col"]],null,null,null,null,null)),(n()(),e.xb(5,0,null,null,3,"p",[],null,null,null,null,null)),(n()(),e.xb(6,0,null,null,1,"a",[["href","https://en.wikipedia.org/wiki/Snake_(video_game_genre)"],["target","_blank"]],null,null,null,null,null)),(n()(),e.Rb(-1,null,["Snake"])),(n()(),e.Rb(-1,null,[" is the common name for a video game concept where the player maneuvers a line which grows in length, with the line itself being a primary obstacle. "])),(n()(),e.xb(9,0,null,null,34,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(n()(),e.xb(10,0,null,null,33,"div",[["class","jumbotron"]],null,null,null,null,null)),(n()(),e.xb(11,0,null,null,2,"div",[["id","stage"]],null,null,null,null,null)),(n()(),e.xb(12,0,null,null,0,"canvas",[["height","500"],["id","game-layer"],["width","700"]],null,null,null,null,null)),(n()(),e.xb(13,0,null,null,0,"canvas",[["height","500"],["id","background-layer"],["width","700"]],null,null,null,null,null)),(n()(),e.xb(14,0,null,null,29,"form",[["class","form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,t){var u=!0;return"submit"===l&&(u=!1!==e.Jb(n,16).onSubmit(t)&&u),"reset"===l&&(u=!1!==e.Jb(n,16).onReset()&&u),u}),null,null)),e.wb(15,16384,null,0,s.q,[],null,null),e.wb(16,4210688,null,0,s.j,[[8,null],[8,null]],null,null),e.Ob(2048,null,s.b,null,[s.j]),e.wb(18,16384,null,0,s.i,[[4,s.b]],null,null),(n()(),e.xb(19,0,null,null,24,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(n()(),e.xb(20,0,null,null,11,"div",[["class","col-4"]],null,null,null,null,null)),(n()(),e.xb(21,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(n()(),e.xb(22,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(n()(),e.xb(23,0,null,null,1,"span",[["class","input-group-text"],["id","scoreLabel"]],null,null,null,null,null)),(n()(),e.Rb(-1,null,["Score"])),(n()(),e.xb(25,0,null,null,6,"input",[["aria-describedby","scoreLabel"],["class","form-control"],["disabled",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,l,t){var u=!0,i=n.component;return"input"===l&&(u=!1!==e.Jb(n,26)._handleInput(t.target.value)&&u),"blur"===l&&(u=!1!==e.Jb(n,26).onTouched()&&u),"compositionstart"===l&&(u=!1!==e.Jb(n,26)._compositionStart()&&u),"compositionend"===l&&(u=!1!==e.Jb(n,26)._compositionEnd(t.target.value)&&u),"ngModelChange"===l&&(u=!1!==(i.score=t)&&u),u}),null,null)),e.wb(26,16384,null,0,s.c,[e.J,e.n,[2,s.a]],null,null),e.Ob(1024,null,s.f,(function(n){return[n]}),[s.c]),e.wb(28,671744,null,0,s.k,[[2,s.b],[8,null],[8,null],[6,s.f]],{isDisabled:[0,"isDisabled"],model:[1,"model"],options:[2,"options"]},{update:"ngModelChange"}),e.Mb(29,{standalone:0}),e.Ob(2048,null,s.g,null,[s.k]),e.wb(31,16384,null,0,s.h,[[4,s.g]],null,null),(n()(),e.xb(32,0,null,null,11,"div",[["class","col-4"]],null,null,null,null,null)),(n()(),e.xb(33,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(n()(),e.xb(34,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(n()(),e.xb(35,0,null,null,1,"span",[["class","input-group-text"],["id","highScoreLabel"]],null,null,null,null,null)),(n()(),e.Rb(-1,null,["High Score"])),(n()(),e.xb(37,0,null,null,6,"input",[["aria-describedby","highScoreLabel"],["class","form-control"],["disabled",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,l,t){var u=!0,i=n.component;return"input"===l&&(u=!1!==e.Jb(n,38)._handleInput(t.target.value)&&u),"blur"===l&&(u=!1!==e.Jb(n,38).onTouched()&&u),"compositionstart"===l&&(u=!1!==e.Jb(n,38)._compositionStart()&&u),"compositionend"===l&&(u=!1!==e.Jb(n,38)._compositionEnd(t.target.value)&&u),"ngModelChange"===l&&(u=!1!==(i.highScore=t)&&u),u}),null,null)),e.wb(38,16384,null,0,s.c,[e.J,e.n,[2,s.a]],null,null),e.Ob(1024,null,s.f,(function(n){return[n]}),[s.c]),e.wb(40,671744,null,0,s.k,[[2,s.b],[8,null],[8,null],[6,s.f]],{isDisabled:[0,"isDisabled"],model:[1,"model"],options:[2,"options"]},{update:"ngModelChange"}),e.Mb(41,{standalone:0}),e.Ob(2048,null,s.g,null,[s.k]),e.wb(43,16384,null,0,s.h,[[4,s.g]],null,null)],(function(n,l){var t=l.component,e=t.score,u=n(l,29,0,!0);n(l,28,0,"",e,u);var i=t.highScore,s=n(l,41,0,!0);n(l,40,0,"",i,s)}),(function(n,l){n(l,14,0,e.Jb(l,18).ngClassUntouched,e.Jb(l,18).ngClassTouched,e.Jb(l,18).ngClassPristine,e.Jb(l,18).ngClassDirty,e.Jb(l,18).ngClassValid,e.Jb(l,18).ngClassInvalid,e.Jb(l,18).ngClassPending),n(l,25,0,e.Jb(l,31).ngClassUntouched,e.Jb(l,31).ngClassTouched,e.Jb(l,31).ngClassPristine,e.Jb(l,31).ngClassDirty,e.Jb(l,31).ngClassValid,e.Jb(l,31).ngClassInvalid,e.Jb(l,31).ngClassPending),n(l,37,0,e.Jb(l,43).ngClassUntouched,e.Jb(l,43).ngClassTouched,e.Jb(l,43).ngClassPristine,e.Jb(l,43).ngClassDirty,e.Jb(l,43).ngClassValid,e.Jb(l,43).ngClassInvalid,e.Jb(l,43).ngClassPending)}))}var v=e.tb("app-snake",g,(function(n){return e.Tb(0,[(n()(),e.xb(0,0,null,null,1,"app-snake",[],null,null,null,p,b)),e.wb(1,245760,null,0,g,[],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]),f=t("SVse"),m=t("iInd"),y=function n(){_classCallCheck(this,n)};t.d(l,"SnakeModuleNgFactory",(function(){return w}));var w=e.ub(u,[],(function(n){return e.Gb([e.Hb(512,e.l,e.fb,[[8,[i.a,v]],[3,e.l],e.B]),e.Hb(4608,f.o,f.n,[e.x,[2,f.D]]),e.Hb(4608,s.o,s.o,[]),e.Hb(1073742336,f.b,f.b,[]),e.Hb(1073742336,m.o,m.o,[[2,m.t],[2,m.k]]),e.Hb(1073742336,y,y,[]),e.Hb(1073742336,s.n,s.n,[]),e.Hb(1073742336,s.d,s.d,[]),e.Hb(1073742336,u,u,[]),e.Hb(1024,m.i,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);