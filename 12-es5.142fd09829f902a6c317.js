function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{jdp0:function(t,e,n){"use strict";n.r(e);var i,r=n("8Y7J"),a=function t(){_classCallCheck(this,t)},o=n("pMnS"),s=n("UMXM"),u=n("uclk"),l=n("oFjw"),c=.9,h=((i=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).draw=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.ctx;t.save(),t.fillStyle=e.BACKGROUND_COLOR,t.fillRect(0,0,i.canvas.width,i.canvas.height),t.lineWidth=.01*i.canvas.width,t.strokeStyle="rgb(200,200,200)";for(var n=i.canvas.height*(1-c)/2,r=1;r<i.grid.cols;r++)s.a.drawLine(t,new l.b(i.x(r),i.y(0)*c+n),new l.b(i.x(r),i.y(i.grid.rows)*c+n));for(var a=i.canvas.width*(1-c)/2,o=1;o<i.grid.cols;o++)s.a.drawLine(t,new l.b(i.x(0)*c+a,i.y(o)),new l.b(i.x(i.grid.rows)*c+a,i.y(o)));t.restore()},i}return _inherits(e,t),e}(u.a)).BACKGROUND_COLOR="#232323",i),d=c,f=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).draw=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ctx;i.clear(),e.lineWidth=.01*i.canvas.width;for(var n=0;n<t.cols;n++)for(var r=0;r<t.rows;r++)i.drawMarker(t.get({x:n,y:r}))(e,n,r)},i.drawMarker=function(t){switch(t){case"X":return i.drawMarkerX;case"O":return i.drawMarkerO;default:return function(){}}},i.drawMarkerX=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"white";t.save();var a=i.x(1),o=i.y(1),u=i.canvas.width*(1-d)/2,c=i.canvas.height*(1-d)/2;t.strokeStyle=r,s.a.drawLine(t,new l.b(i.x(e)+u,i.y(n)+c),new l.b(i.x(e)+a-u,i.y(n)+o-c)),s.a.drawLine(t,new l.b(i.x(e)+u,i.y(n)+o-c),new l.b(i.x(e)+a-u,i.y(n)+c)),t.restore()},i.drawMarkerO=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"white";t.save();var a=i.x(1),o=i.y(1),s=i.canvas.width*(1-d)/2,u=i.canvas.height*(1-d)/2,l=(Math.min(a,o)*d-Math.min(s,u))/2;t.strokeStyle=r,t.beginPath(),t.arc(i.x(e)+a/2,i.y(n)+o/2,l,0,2*Math.PI),t.stroke(),t.closePath(),t.restore()},i}return _inherits(e,t),e}(u.a),v=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).draw=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ctx;t.winner&&(i.clear(),i.drawText(e,t.winner))},i.drawText=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.canvas.width/2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.canvas.height/2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.a.getFont(i.y(1)),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"rgba(255,0,0,0.9)",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"rgba(100,100,100,0.9)";t.save(),t.fillStyle=u,t.fillRect(0,i.y(1),i.canvas.width,i.y(1)),s.a.drawText(t,"tie"===e?"tie!":e+" wins!",n,r,i.canvas.width*c,a,o),t.restore()},i}return _inherits(e,t),e}(u.a),g=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;_classCallCheck(this,t),this.cols=n,this.rows=i,this.board=[],this.turns=0,this.next=function(){return new t(e.cols,e.rows)};for(var r=0;r<this.cols;r++)this.board[r]=[]}return _createClass(t,[{key:"get",value:function(t){var e=t.x,n=t.y;return this.board[e]?this.board[e][n]:void 0}},{key:"set",value:function(t,e){var n=t.x,i=t.y;this.board[n][i]=e}},{key:"setIfAble",value:function(t,e){var n=!1;return this.winner||(this.get(e)||(this.set(e,t),n=!0),this.checkWinner()),n}},{key:"setNextTurn",value:function(t){var e=!1;return t&&this.setIfAble(this.getTurn(),t)&&(this.nextTurn(),e=!0),e}},{key:"takeTurn",value:function(t){this.setNextTurn(t)}},{key:"nextTurn",value:function(){return this.turns++%2==0?"X":"O"}},{key:"getTurn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.turns;return t%2==0?"X":"O"}},{key:"checkWinner",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(t=this.checkColWins())||(t=this.checkRowWins())||(t=this.checkDiagonalWins())||this.checkBoardFull()&&(t="tie"),e&&(this.winner=t),t}},{key:"checkColWins",value:function(){for(var t=0;t<this.cols;t++){for(var e=this.get({x:t,y:0}),n=1;n<this.rows;n++)e!==this.get({x:t,y:n})&&(e=void 0);if(e)return e}}},{key:"checkRowWins",value:function(){for(var t=0;t<this.cols;t++){for(var e=this.get({x:0,y:t}),n=1;n<this.rows;n++)e!==this.get({x:n,y:t})&&(e=void 0);if(e)return e}}},{key:"checkDiagonalWins",value:function(){for(var t=this.get({x:0,y:0}),e=this.get({x:0,y:this.rows-1}),n=1;n<this.cols;n++)t!==this.get({x:n,y:n})&&(t=void 0),e!==this.get({x:n,y:this.rows-1-n})&&(e=void 0);return t||e}},{key:"checkBoardFull",value:function(){for(var t=0;t<this.cols;t++)for(var e=0;e<this.rows;e++)if(!this.get({x:t,y:e}))return!1;return!0}}]),t}(),w=n("dQPR"),y=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0===Object(w.b)(0)(2);return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n,i))).isAiTurn=r,t.next=function(){return new e(t.cols,t.rows)},t.bestMove=function(){return t.minimax().move},t.scores=function(e){return"tie"===e?0:e===t.getTurn()?10:-10},t.player=function(e){return e?t.getTurn():t.getTurn(t.turns+1)},t}return _inherits(e,t),_createClass(e,[{key:"takeTurn",value:function(t){if(this.isAiTurn&&!this.checkWinner()){for(;!this.setNextTurn(this.bestMove()););this.checkWinner(),this.isAiTurn=!1}else this.isAiTurn=this.setNextTurn(t)}},{key:"getAvailableMoves",value:function(){for(var t=[],e=0;e<this.cols;e++)for(var n=0;n<this.rows;n++)this.get({x:e,y:n})||t.push(new l.b(e,n));return t}},{key:"minimax",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.checkWinner(!1);if(void 0!==r)return{score:this.scores(r)};var a,o=e.getAvailableMoves(),s=i?-1/0:1/0;return o.forEach((function(r){e.set(r,t.player(i));var o=t.minimax(e,n+1,!i).score;e.set(r,void 0),(s=i?Math.max(o,s):Math.min(o,s))===o&&(a=r)})),{score:s,move:a}}}]),e}(g),b=function(){function t(e,n,i){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new y;_classCallCheck(this,t),this.state=a,this.fps=60,this.update=function(t){return function(e){e-t>1e3/r.fps?(r.state.takeTurn(),r.gameAnimator.draw(r.state),r.state.winner?(r.uiAnimator.draw(r.state),r.state=r.state.next(),setTimeout((function(){r.animationFrameId=window.requestAnimationFrame(r.update(e))}),2e3)):(r.uiAnimator.clear(),r.animationFrameId=window.requestAnimationFrame(r.update(e)))):r.animationFrameId=window.requestAnimationFrame(r.update(t))}},this.gameAnimator=new f(e,a),this.backgroundAnimator=new h(n,a),this.uiAnimator=new v(i,a);for(var o=function(t){return Math.round(t*i.width/r.state.cols)},u=function(t){return Math.round(t*i.height/r.state.rows)},l=[],c=function(t){for(var e=function(e){l.push({x:o(t),y:u(e),width:o(1),height:u(1),enabled:!0,onClick:function(){r.state.takeTurn({x:t,y:e})}})},n=0;n<a.rows;n++)e(n)},d=0;d<a.cols;d++)c(d);s.a.addButtonClickEventListener(i,l)}return _createClass(t,[{key:"start",value:function(){this.backgroundAnimator.draw(),this.gameAnimator.draw(this.state),this.animationFrameId=window.requestAnimationFrame(this.update(0))}},{key:"ngOnDestroy",value:function(){this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId)}}]),t}(),m=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){this.scaleCanvas(),this.animator=new b(document.getElementById("game-layer"),document.getElementById("background-layer"),document.getElementById("ui-layer")),this.animator.start()}},{key:"ngOnDestroy",value:function(){this.animator.ngOnDestroy()}},{key:"scaleCanvas",value:function(t){var e=document.getElementById("menu"),n=document.getElementById("main"),i=document.getElementById("stage"),r=document.getElementById("background-layer"),a=(window.innerHeight-e.offsetHeight-10)/r.height,o=n.offsetWidth/r.width,s=Math.min(o,a);Math.max(o,a),i.style.transformOrigin="0 0",i.style.transform="scale("+s+")"}}]),t}(),k=r.vb({encapsulation:0,styles:[["#stage[_ngcontent-%COMP%]{width:900px;height:900px;position:relative;box-sizing:content-box;border:1px solid;background-color:#fff}#stage[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}#stage[_ngcontent-%COMP%]   #ui-layer[_ngcontent-%COMP%]{z-index:3}#stage[_ngcontent-%COMP%]   #game-layer[_ngcontent-%COMP%]{z-index:2}#stage[_ngcontent-%COMP%]   #background-layer[_ngcontent-%COMP%]{z-index:1}"]],data:{}});function p(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,3,"div",[["id","stage"]],null,null,null,null,null)),(t()(),r.xb(1,0,null,null,0,"canvas",[["height","900"],["id","ui-layer"],["width","900"]],null,null,null,null,null)),(t()(),r.xb(2,0,null,null,0,"canvas",[["height","900"],["id","game-layer"],["width","900"]],null,null,null,null,null)),(t()(),r.xb(3,0,null,null,0,"canvas",[["height","900"],["id","background-layer"],["width","900"]],null,null,null,null,null))],null,null)}var x=r.tb("app-tic-tac-toe",m,(function(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-tic-tac-toe",[],null,[["window","resize"]],(function(t,e,n){var i=!0;return"window:resize"===e&&(i=!1!==r.Jb(t,1).scaleCanvas(n)&&i),i}),p,k)),r.wb(1,245760,null,0,m,[],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),_=n("SVse"),C=n("iInd"),O=function t(){_classCallCheck(this,t)};n.d(e,"TicTacToeModuleNgFactory",(function(){return M}));var M=r.ub(a,[],(function(t){return r.Gb([r.Hb(512,r.l,r.fb,[[8,[o.a,x]],[3,r.l],r.B]),r.Hb(4608,_.o,_.n,[r.x,[2,_.D]]),r.Hb(1073742336,_.b,_.b,[]),r.Hb(1073742336,C.o,C.o,[[2,C.t],[2,C.k]]),r.Hb(1073742336,O,O,[]),r.Hb(1073742336,a,a,[]),r.Hb(1024,C.i,(function(){return[[{path:"",component:m}]]}),[])])}))}}]);